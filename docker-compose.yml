services:
  website:
    image: dukerupert/fs-website:latest
    container_name: fs-website
    restart: unless-stopped
    ports:
      - "${LISTEN_PORT:-3000}:${PORT:-80}"
    environment:
      PORT: "${PORT:-80}"
      API_PORT: "${API_PORT:-8080}"
      ALLOWED_ORIGIN: "${ALLOWED_ORIGIN:-https://fireflysoftware.dev}"
      TURNSTILE_SECRET: "${TURNSTILE_SECRET:-}"
      POSTMARK_TOKEN: "${POSTMARK_TOKEN:-}"
      FROM_EMAIL: "${FROM_EMAIL:-noreply@fireflysoftware.dev}"
      TO_EMAIL: "${TO_EMAIL:-service@fireflysoftware.dev}"
    healthcheck:
      test: ["CMD", "wget", "-qO-", "http://localhost:${PORT:-80}/api/health"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
