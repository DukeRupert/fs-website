{{ define "main" }}

{{- /* Look up this project in data */}}
{{ $slug := .File.ContentBaseName }}
{{ $project := dict }}
{{ range .Site.Data.portfolio.projects }}
  {{ if eq .slug $slug }}
    {{ $project = . }}
  {{ end }}
{{ end }}

<section class="case-study-hero">
  <div class="container">
    <nav class="breadcrumb" style="grid-column:1/-1;" aria-label="Breadcrumb">
      <a href="/">Home</a>
      <span class="breadcrumb-sep" aria-hidden="true">/</span>
      <a href="/portfolio/">Portfolio</a>
      <span class="breadcrumb-sep" aria-hidden="true">/</span>
      <span aria-current="page">{{ .Title }}</span>
    </nav>
    <div>
      {{ with $project.logo }}
      <img
        src="{{ . }}"
        alt="{{ $project.name }} logo"
        width="120"
        height="60"
        loading="eager"
        style="max-height:60px;width:auto;object-fit:contain;margin-bottom:var(--space-xl);background:var(--granite);padding:var(--space-sm) var(--space-md);border-radius:4px;"
      >
      {{ end }}
      <h1 style="color:white;">{{ .Title }}</h1>
      <p style="color:rgba(255,255,255,0.8);font-size:1.1rem;margin-top:var(--space-md);">{{ .Description }}</p>
      <dl class="case-study-meta">
        {{ with $project.client }}
        <div class="case-study-meta-item">
          <dt>Client</dt>
          <dd>{{ . }}</dd>
        </div>
        {{ end }}
        {{ with $project.date }}
        <div class="case-study-meta-item">
          <dt>Date</dt>
          <dd>{{ . }}</dd>
        </div>
        {{ end }}
        {{ with $project.category }}
        <div class="case-study-meta-item">
          <dt>Industry</dt>
          <dd>{{ . }}</dd>
        </div>
        {{ end }}
        {{ with $project.location }}
        <div class="case-study-meta-item">
          <dt>Location</dt>
          <dd>{{ . }}</dd>
        </div>
        {{ end }}
      </dl>
    </div>
    {{ with $project.mobile }}
    <div class="case-study-mobile">
      <img
        src="{{ . }}"
        alt="{{ $project.name }} mobile screenshot"
        width="400"
        height="600"
        loading="eager"
      >
    </div>
    {{ end }}
  </div>
</section>

<section class="section">
  <div class="container container--narrow">
    <div class="post-content">
      {{ .Content }}
    </div>

    {{- /* Desktop screenshot â€” secondary showcase */}}
    {{ with $project.splash }}
    <div class="case-study-desktop">
      <img
        src="{{ . }}"
        alt="{{ $project.name }} desktop screenshot"
        width="800"
        height="499"
        loading="lazy"
      >
    </div>
    {{ end }}

    {{- /* Client testimonial from front matter */}}
    {{ with .Params.testimonial }}
    <div class="client-quote" style="margin-top:var(--space-3xl);">
      <blockquote>{{ .quote }}</blockquote>
      <div class="client-quote-author">
        <div class="client-quote-author-info">
          <strong>{{ .author }}</strong>
          <span>{{ .role }}</span>
        </div>
      </div>
    </div>
    {{ end }}

  </div>
</section>

{{- /* Navigation between case studies */}}
<nav class="section section-alt" aria-label="Case study navigation">
  <div class="container" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);">
    {{ with .PrevInSection }}
    <a href="{{ .RelPermalink }}" class="btn btn-outline btn--sm">&larr; {{ .Title }}</a>
    {{ else }}<span></span>{{ end }}
    <a href="/portfolio/" class="btn btn-outline btn--sm">All Case Studies</a>
    {{ with .NextInSection }}
    <a href="{{ .RelPermalink }}" class="btn btn-outline btn--sm">{{ .Title }} &rarr;</a>
    {{ else }}<span></span>{{ end }}
  </div>
</nav>

<section class="cta-section">
  <div class="container">
    <h2>Ready to start your project?</h2>
    <p>Let's build something great together.</p>
    <a href="/contact-us/" class="btn" style="background:var(--snow);color:var(--rust);">Get in touch</a>
  </div>
</section>

{{ end }}
